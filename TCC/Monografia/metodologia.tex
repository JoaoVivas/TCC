\chapter{METODOLOGIA}

\section{Materiais}

\section{Modelagem dinâmica de uma impressora 3D}
Para a modelagem dinâmica dos eixos X e Y da impressora 3D, 
é considerado que os eixos são completamente independentes, 
a flexibilidade da correia é aproximada utilizando um conjunto 
mola amortecedor e a transmissão de movimento e torque dos 
motores é considerada como ideal e não será abordada.
Assim duas posições de estudo surgem para cada eixo, uma delas 
representa a posição ideal e desejada pelo usuário (X1) e a 
segunda é a posição real considerando as forças inerciais e a 
flexibilidade introduzida pela correia (X2) como na Figura 4.

\subsection{Espaço de estados}
Organizando as equações de movimento dos eixos x e y da 
impressora em espaço de estados em forma matricial, sendo 
Dx, Vx, Ax, Dy, Vy, Ay as variáveis referentes à posição,
velocidade e aceleração das massas x e y e as variáveis Dxb, 
Vxb, Axb, Dyb, Vyb, Ayb referentes a base, relacionadas 
relacionadas pela equação:

equação

Na função não linear as igualdades são calculadas em cada ponto, 
sendo os de índice "i" o ponto atual e "n" o próximo ponto.

\section{Geração de Comando}

\subsection{Leitura Gcode}
\subsection{Curva rapezoidal de velocidade}
\subsection{Interpolação}

\section{Runge Kutta}

\section{Função fmincon}
Como o modelo matemático a ser otimizado é multivariável e 
possuindo restrições não-lineares, a função FMINCON do ambiente 
do MATLAB é utilizada para otimizar as variações de velocidade 
de forma a diminuir o erro de trajetória associado às 
flexibilidades do sistema que causam perturbações e vibrações 
indesejadas.
É uma função baseada em gradientes que busca por todos os 
mínimos locais de uma região que satisfaz outras restrições 
estipuladas \cite{albaghdadi21}.
Ela utiliza um conjunto de restrições superiores e inferiores 
para cada ponto e otimiza a função considerando as restrições 
estabelecidas pela função não linear, utilizando as equações de 
movimento para encontrar a resolução da EDO de maneira e 
otimizar os parâmetros utilizando o algoritmo sqp, com o 
objetivo de minimizar a seguinte função:

eq

Sendo Dmx e Dmy os vetores com os pontos de deslocamento 
calculados e Dmex e Dmey os vetores de deslocamento desejados, 
ou seja, a trajetória requerida para a impressão.

\subsection{Restrições lineares}
\subsection{Restrições não lineares}
\subsection{Cofiguração da Fmincon}
